language: python
dist: trusty

matrix:
    # notify a failed build as soon as anything fails
    fast_finish: true
    include:
        - env: TOXENV=py26
          python: '2.6'
        - env: TOXENV=py27
          python: '2.7'
        - env: TOXENV=py36
          python: '3.6'
        - env: TOXENV=lint
          python: '2.7'
        - env: TOXENV=pypy
          python: 'pypy-5.4.1'

install: ./venv_update.py venv= $VIRTUAL_ENV install= -r CI/requirements.txt
script:
    - . CI/env
    - tox


sudo: required
cache:
    directories:
        - $HOME/venv
        - $HOME/.pip
        - $HOME/.pre-commit
